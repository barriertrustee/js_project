const boxes=Array.from(document.querySelectorAll(".box")),lines=Array.from(document.querySelectorAll(".horizontal-line, .vertical-line")),elements=Array.from(document.querySelectorAll(".game *")),xTurn=document.querySelector(".x-turn"),oTurn=document.querySelector(".o-turn"),xSquare=document.querySelector(".x-square"),oSquare=document.querySelector(".o-square"),killScreen=document.querySelector(".kill-screen"),killScreenH1=document.querySelector(".kill-screen h1"),resetButton=document.querySelector(".kill-screen button");let count=0,xCounter=0,oCounter=0,checking=!0;lines.forEach(line=>{line.addEventListener("click",()=>{checking=!0,line.disabled=!0,line.style.backgroundColor="grey";let index=elements.indexOf(line);if(count%2==0){if("horizontal-line"===line.className){let squares;[elements[index-21],elements[index+21]].forEach(square=>{if(void 0===square)return;if(!1===boxes.includes(square))return;let indexNumber=elements.indexOf(square),surroundingLines;[elements[indexNumber-21],elements[indexNumber-1],elements[indexNumber+1],elements[indexNumber+21]].every(surroundingline=>""!==surroundingline.style.backgroundColor)&&(square.innerHTML="X",square.style.color="red",xCounter++,xSquare.innerHTML=xCounter,checking=!1)})}if("vertical-line"===line.className){let squares;[elements[index-1],elements[index+1]].forEach(square=>{if(void 0===square)return;if(!1===boxes.includes(square))return;let indexNumber=elements.indexOf(square),surroundingLines;[elements[indexNumber-21],elements[indexNumber-1],elements[indexNumber+1],elements[indexNumber+21]].every(surroundingLine=>""!==surroundingLine.style.backgroundColor)&&(square.innerHTML="X",square.style.color="red",xCounter++,checking=!1,xSquare.innerHTML=xCounter)})}if(checking){let xTurnChildren,oTurnChildren;xTurn.style.opacity="0",xTurn.style.right="100%",Array.from(xTurn.children).forEach(element=>{element.style.display="none"}),oTurn.style.left="75%",oTurn.style.opacity="1",Array.from(oTurn.children).forEach(element=>{element.style.display="block"})}}if(count%2==1){if("horizontal-line"===line.className){let squares;[elements[index-21],elements[index+21]].forEach(square=>{if(void 0===square)return;if(!1===boxes.includes(square))return;let indexNumber=elements.indexOf(square),surroundingLines;[elements[indexNumber-21],elements[indexNumber-1],elements[indexNumber+1],elements[indexNumber+21]].every(surroundingLine=>""!==surroundingLine.style.backgroundColor)&&(square.innerHTML="O",square.style.color="hsl(210, 100%, 40%)",oCounter++,checking=!1,oSquare.innerHTML=oCounter)})}if("vertical-line"===line.className){let squares;[elements[index-1],elements[index+1]].forEach(square=>{if(void 0===square)return;if(!1===boxes.includes(square))return;let indexNumber=elements.indexOf(square),surroundingLines;[elements[indexNumber-21],elements[indexNumber-1],elements[indexNumber+1],elements[indexNumber+21]].every(surroundingLine=>""!==surroundingLine.style.backgroundColor)&&(square.innerHTML="O",square.style.color="hsl(210, 100%, 40%)",oCounter++,checking=!1,oSquare.innerHTML=oCounter)})}if(checking){let oTurnChildren,xTurnChildren;oTurn.style.left="100%",oTurn.style.opacity="0",Array.from(oTurn.children).forEach(element=>{element.style.display="none"}),xTurn.style.right="75%",xTurn.style.opacity="1",Array.from(xTurn.children).forEach(element=>{element.style.display="block"})}}if(checking&&count++,xCounter+oCounter===100){let xTurnChildren,oTurnChildren;if(xTurn.style.right="75%",xTurn.style.opacity="1",Array.from(xTurn.children).forEach(element=>{element.style.display="block"}),oTurn.style.left="75%",oTurn.style.opacity="1",Array.from(oTurn.children).forEach(element=>{element.style.display="block"}),killScreen.style.display="flex",xCounter>oCounter)return void(killScreenH1.innerHTML="X wins");if(oCounter<xCounter)return void(killScreenH1.innerHTML="O wins");killScreenH1.innerHTML="It's a draw"}})}),resetButton.addEventListener("click",()=>{let oTurnChildren;boxes.forEach(box=>{box.innerHTML=""}),lines.forEach(line=>{line.style.backgroundColor="white"}),oTurn.style.left="100%",oTurn.style.opacity="0",Array.from(oTurn.children).forEach(element=>{element.style.display="none"}),count=0,xCounter=0,oCounter=0,checking=!0,killScreenH1.innerHTML="",killScreen.style.display="none"});